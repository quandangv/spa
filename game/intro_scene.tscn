[gd_scene load_steps=34 format=2]

[ext_resource path="res://game/move-controls.png" type="Texture" id=1]
[ext_resource path="res://backgrounds/ring-planet.tscn" type="PackedScene" id=2]
[ext_resource path="res://game/tracker.gd" type="Script" id=3]
[ext_resource path="res://game/input_controller.gd" type="Script" id=4]
[ext_resource path="res://game/plasma.tscn" type="PackedScene" id=5]
[ext_resource path="res://game/object_pool.gd" type="Script" id=6]
[ext_resource path="res://game/plasma_pool.gd" type="Script" id=7]
[ext_resource path="res://game/ship.tscn" type="PackedScene" id=8]
[ext_resource path="res://fonts/SceneHelpEmph.tres" type="DynamicFont" id=9]
[ext_resource path="res://fonts/SceneHelp.tres" type="DynamicFont" id=10]
[ext_resource path="res://fonts/SceneHelpSmall.tres" type="DynamicFont" id=11]
[ext_resource path="res://game/arrow.svg" type="Texture" id=12]
[ext_resource path="res://game/fire-control.svg" type="Texture" id=13]
[ext_resource path="res://game/circle.svg" type="Texture" id=14]
[ext_resource path="res://game/asteroid.tscn" type="PackedScene" id=15]
[ext_resource path="res://game/follower_asteroid_field.gd" type="Script" id=16]
[ext_resource path="res://game/following_asteroid.tscn" type="PackedScene" id=17]
[ext_resource path="res://game/exclamation.svg" type="Texture" id=18]
[ext_resource path="res://Digifunk - DivKid.mp3" type="AudioStream" id=19]
[ext_resource path="res://game/reset.svg" type="Texture" id=20]
[ext_resource path="res://no_background_theme.tres" type="Theme" id=21]
[ext_resource path="res://game/standalone_asteroid.gd" type="Script" id=22]
[ext_resource path="res://game/blue_container.gd" type="Script" id=23]
[ext_resource path="res://game/bot_controller.tscn" type="PackedScene" id=24]
[ext_resource path="res://game/intro_boss.gd" type="Script" id=25]
[ext_resource path="res://game/collect.png" type="Texture" id=26]
[ext_resource path="res://game/end_screen.gd" type="Script" id=27]

[sub_resource type="Animation" id=5]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:text")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ "WATCH OUT
FOR THE ASTEROIDS!" ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Exclamation:self_modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Label3:text")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ "hit this baby!" ]
}

[sub_resource type="Animation" id=6]
resource_name = "battle"
length = 4.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:text")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ "WATCH OUT
FOR THE ASTEROID!" ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.2 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ Color( 1, 0, 0, 1 ), Color( 1, 1, 1, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Exclamation:self_modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.2 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ Color( 1, 0, 0, 1 ), Color( 1, 1, 1, 1 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Label3:text")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ "Hit this baby!" ]
}

[sub_resource type="Gradient" id=1]
offsets = PoolRealArray( 0.2, 0.2, 0.55, 0.55, 0.81017, 1 )
colors = PoolColorArray( 0.105882, 0.74902, 1, 1, 0.168627, 0.192157, 0.333333, 1, 0.384314, 0.384314, 0.384314, 1, 0.566406, 0.157089, 0.157089, 1, 0.71875, 0.704931, 0.36499, 1, 0.539062, 0.335894, 0.138977, 1 )

[sub_resource type="CircleShape2D" id=2]

[sub_resource type="Animation" id=3]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("col:disabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ false ]
}

[sub_resource type="Animation" id=4]
resource_name = "destroyed"
length = 6.0
tracks/0/type = "value"
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 4, 6 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 3, 3 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 4, 6 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 0 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("col:disabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 3.9, 4 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ false, true ]
}
tracks/3/type = "method"
tracks/3/path = NodePath("../boss")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 4 ),
"transitions": PoolRealArray( 1 ),
"values": [ {
"args": [  ],
"method": "spawn_boss"
} ]
}

[node name="game" type="Node2D"]

[node name="music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 19 )
autoplay = true
bus = "Music"

[node name="plasma_normal" type="Node2D" parent="."]
z_index = -1
script = ExtResource( 7 )
plasma_size = 2.0

[node name="pool" type="Node" parent="plasma_normal"]
script = ExtResource( 6 )
scene = ExtResource( 5 )

[node name="ship" parent="." instance=ExtResource( 8 )]
position = Vector2( -550, 0 )
rotation = 0.0
type = "asteroid_breaker"

[node name="controller" type="Node2D" parent="ship"]
script = ExtResource( 4 )

[node name="background2" parent="." instance=ExtResource( 2 )]

[node name="ui" type="CanvasLayer" parent="."]

[node name="reset_button" type="Button" parent="ui"]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -177.0
margin_bottom = 64.0
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource( 21 )
custom_colors/font_color_focus = Color( 1, 1, 1, 1 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
custom_colors/font_color_hover = Color( 0.694118, 0.898039, 1, 1 )
custom_colors/font_color_pressed = Color( 0.694118, 0.898039, 1, 0.584314 )
custom_fonts/font = ExtResource( 10 )
text = "RESET"
icon = ExtResource( 20 )

[node name="camera" type="Camera2D" parent="."]
position = Vector2( -2700, 0 )
current = true
zoom = Vector2( 0.3, 0.3 )
smoothing_enabled = true
smoothing_speed = 2.0
script = ExtResource( 3 )
tracked_obj = [ NodePath("../ship") ]

[node name="move-controls" type="Sprite" parent="."]
position = Vector2( -2600, -50 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 1 )

[node name="Label" type="RichTextLabel" parent="move-controls"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -169.334
margin_top = -178.0
margin_right = 90.666
margin_bottom = -129.0
custom_fonts/bold_font = ExtResource( 9 )
custom_fonts/normal_font = ExtResource( 10 )
bbcode_enabled = true
bbcode_text = "to [b]accelerate[/b]"
text = "to accelerate"
scroll_active = false

[node name="Label2" type="Label" parent="move-controls"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -152.667
margin_top = -122.333
margin_right = 104.333
margin_bottom = -96.3333
custom_fonts/font = ExtResource( 11 )
text = "there's no top speed..."

[node name="Arrow" type="Sprite" parent="move-controls"]
position = Vector2( 456.667, 173.333 )
texture = ExtResource( 12 )

[node name="default-config-note" type="Label" parent="."]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -2351.0
margin_top = -25.0
margin_right = -2042.0
margin_bottom = 28.0
rect_scale = Vector2( 0.3, 0.3 )
custom_fonts/font = ExtResource( 11 )
text = "this is only correct for
the default configuration btw"

[node name="fire-control" type="Sprite" parent="."]
position = Vector2( -2107, -49 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 13 )

[node name="Label" type="RichTextLabel" parent="fire-control"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -202.667
margin_top = -203.333
margin_right = -65.667
margin_bottom = -154.333
custom_fonts/bold_font = ExtResource( 9 )
custom_fonts/normal_font = ExtResource( 10 )
bbcode_enabled = true
bbcode_text = "to [b]fire[/b]"
text = "to fire"
scroll_active = false

[node name="Label2" type="Label" parent="fire-control"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -182.667
margin_top = -116.667
margin_right = 74.333
margin_bottom = -90.667
custom_fonts/font = ExtResource( 11 )
text = "firing while moving will make projectiles faster
but that might mess up your aim"

[node name="asteroid" parent="." instance=ExtResource( 15 )]
position = Vector2( -2078, 78 )
mass = 1000.0
angular_damp = 1.0
script = ExtResource( 22 )
size = 10.0
damage = 20.0
color = Color( 0, 0.788235, 1, 1 )
side_count = 6.0
primary_target_path = NodePath("../blue_container")
secondary_target_path = NodePath("../ship")

[node name="asteroid_warning" type="Label" parent="."]
anchor_bottom = 1.0
margin_left = -1708.0
margin_top = -9.0
margin_right = -1318.0
margin_bottom = 86.0
rect_scale = Vector2( 0.3, 0.3 )
custom_fonts/font = ExtResource( 9 )
text = "WATCH OUT
FOR THE ASTEROIDS!"

[node name="Exclamation" type="Sprite" parent="asteroid_warning"]
position = Vector2( -30, 30 )
texture = ExtResource( 18 )

[node name="Label3" type="Label" parent="asteroid_warning"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -1560.0
margin_top = 232.5
margin_right = -1397.0
margin_bottom = 279.5
custom_fonts/font = ExtResource( 11 )
text = "hit this baby!"

[node name="Circle" type="Sprite" parent="asteroid_warning"]
position = Vector2( -1233, 290.667 )
texture = ExtResource( 14 )

[node name="anim" type="AnimationPlayer" parent="asteroid_warning"]
anims/RESET = SubResource( 5 )
anims/battle = SubResource( 6 )

[node name="notifier" type="VisibilityNotifier2D" parent="."]
position = Vector2( -1700, 4.5 )
rect = Rect2( -1, -1, 2, 2 )

[node name="asteroids" type="Node2D" parent="notifier"]
script = ExtResource( 16 )
spawn_rate = 10.0
spawn_range = Rect2( 0, -200, 0, 400 )
available_sizes_range = Vector2( 2, 5 )
colors = SubResource( 1 )
initial_velocity = Vector2( -70, 0 )
velocity_angle_range = 1.0
attach_distance = Vector2( 600, 0 )
target = NodePath("../../ship")
blue_container = NodePath("../../blue_container")

[node name="pool" type="Node" parent="notifier/asteroids"]
script = ExtResource( 6 )
scene = ExtResource( 17 )

[node name="Arrow2" type="Sprite" parent="."]
position = Vector2( -1500, -10 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 12 )

[node name="Label2" type="Label" parent="."]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -1326.0
margin_top = -4.0
margin_right = -1206.0
margin_bottom = 21.0
rect_scale = Vector2( 0.3, 0.3 )
custom_fonts/font = ExtResource( 10 )
text = "be careful..."

[node name="Label3" type="Label" parent="."]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -966.0
margin_top = -15.0
margin_right = -749.0
margin_bottom = 31.0
rect_scale = Vector2( 0.3, 0.3 )
custom_fonts/font = ExtResource( 10 )
text = "try shooting"

[node name="Arrow3" type="Sprite" parent="."]
position = Vector2( -1190, 12 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 12 )

[node name="Collect" type="Sprite" parent="."]
position = Vector2( -478, -20 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 26 )

[node name="Label3" type="Label" parent="Collect"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -520.333
margin_top = 86.5
margin_right = 185.667
margin_bottom = 181.5
custom_fonts/font = ExtResource( 10 )
text = "see those blue asteroids?
shoot them down and bring them here"
align = 1

[node name="blue_container" type="StaticBody2D" parent="."]
position = Vector2( -500, 0 )
z_index = 3
script = ExtResource( 23 )
color = Color( 0, 0.694118, 1, 1 )

[node name="col" type="CollisionShape2D" parent="blue_container"]
shape = SubResource( 2 )

[node name="anim" type="AnimationPlayer" parent="blue_container"]
anims/RESET = SubResource( 3 )
anims/destroyed = SubResource( 4 )

[node name="boss" type="Node2D" parent="."]
position = Vector2( -500, 0 )
script = ExtResource( 25 )
battle_anim = NodePath("../asteroid_warning/anim")
container_anim = NodePath("../blue_container/anim")
asteroids_path = NodePath("../notifier/asteroids")

[node name="boss" parent="boss" instance=ExtResource( 8 )]
show_behind_parent = true
rotation = 0.0
starting_side = "enemy"
type = "asteroid_breaker"

[node name="controller" parent="boss/boss" instance=ExtResource( 24 )]
max_from_anchor = 10000.0

[node name="end_screen" type="Node2D" parent="boss"]
z_index = 4
script = ExtResource( 27 )

[connection signal="pressed" from="ui/reset_button" to="ship" method="reset"]
[connection signal="pressed" from="ui/reset_button" to="asteroid" method="reset"]
[connection signal="pressed" from="ui/reset_button" to="blue_container" method="reset"]
[connection signal="pressed" from="ui/reset_button" to="boss" method="reset"]
[connection signal="screen_entered" from="notifier" to="notifier/asteroids" method="attach"]
[connection signal="filled" from="blue_container" to="boss" method="enter_stage"]
[connection signal="destroyed" from="boss/boss" to="boss" method="end_game"]
[connection signal="destroyed" from="boss/boss" to="boss/end_screen" method="wake_up"]
